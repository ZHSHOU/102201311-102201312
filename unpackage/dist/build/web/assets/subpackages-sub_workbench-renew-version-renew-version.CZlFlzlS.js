import{d as e,Y as t,J as s,h as o,j as a,o as r,a as n,w as i,e as l,f as c,s as d,X as u,Q as _,i as p}from"./index-CzFVNye6.js";import{_ as m}from"./wd-icon.C3a6lim4.js";import{r as f}from"./uni-app.es.xDvG45QC.js";import{_ as v}from"./custom-editor.vue_vue_type_script_setup_true_name_custom-editor_lang.B4uVawBd.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./props.Cxz2570m.js";const j=b(e({__name:"renew-version",setup(e){const b=t.database(),j=s({version_content:"",excerpt:""}),x=o(),h=o(!1),w=e=>{j.version_content=e.html,j.excerpt=e.text.slice(0,160)};return(e,t)=>{const s=f(a("wd-icon"),m),o=_,g=p,C=f(a("custom-editor"),v);return r(),n(g,{class:"content"},{default:i((()=>[l(g,{class:"header"},{default:i((()=>[l(o,{class:"submit-btn",disabled:h.value||!j.version_content,onClick:t[0]||(t[0]=e=>(h.value=!0,void b.collection("travel-version").add({...j}).then((()=>{d({title:"版本发布成功",icon:"none"}),setTimeout((()=>{h.value=!1,u()}),1500)})).catch((e=>{console.log("发布失败error----",e),d({title:"发布失败，请联系管理员",icon:"none"}),h.value=!1}))))},{default:i((()=>[l(s,{name:"file-paste",size:"28rpx"}),c(" 确认 ")])),_:1},8,["disabled"])])),_:1}),l(g,{class:"footer-editor"},{default:i((()=>[l(C,{ref_key:"editComp",ref:x,onSetEditerValue:w},null,512)])),_:1})])),_:1})}}}),[["__scopeId","data-v-d7bbe82e"]]);export{j as default};
