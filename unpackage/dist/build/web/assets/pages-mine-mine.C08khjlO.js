import{d as a,Y as e,c as t,J as s,j as l,o as i,a as c,w as r,e as u,f as n,t as o,u as d,m,p as f,F as p,N as _,q as h,i as v,g,O as k,n as y,P as b,Q as x}from"./index-BKu2siHj.js";import{_ as w}from"./wd-icon.DxmEC5Gr.js";import{o as j,a as C,d as I,r as z}from"./uni-app.es.D1_Kkzeg.js";import{_ as L}from"./default-avatar.DPaE08He.js";import{s as N,b as $,g as F}from"./index.CapNOk9P.js";import{s as E}from"./store.BXzH0KI-.js";import{_ as A}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./props.BEkDoAAj.js";import"./config.defalut.DCXQerkV.js";const B=A(a({__name:"mine",setup(a){const A=e.database(),B=t((()=>E.hasLogin)),T=t((()=>E.userInfo)),q=t((()=>E.userInfo.nickname||E.userInfo.username||E.userInfo.mobile||"微信用户")),D=s({artNum:0,receivedLikes:0,commentNum:0}),G=s([{image:"../../static/image/default-notice.jpg",text:"福大帮，棒棒棒！"},{image:"../../static/image/default-notice2.jpg",text:"AI助手，路书轻松写！世界听你说"}]),H=[{title:"我的点赞",icon:"thumb-up",path:"my-like-article"},{title:"我的分类",icon:"view-module",path:"my-classify"},{title:"我的草稿",icon:"bianjiliebiao",path:"my-article"},{title:"我的留言",icon:"discount",path:"my-feedback"}],J=[{title:"联系作者",icon:"chat",path:"chat"},{title:"版本",icon:"chart-bubble",path:"version"}],K=a=>{$()&&a.path&&"chat"!=a.path&&_({url:`/subpackages/sub_mine/${a.path}/${a.path}?title=${a.title}`})},O=()=>{$()&&_({url:"/uni_modules/uni-id-pages/pages/userinfo/userinfo"})};return j((()=>({title:"福大帮，这是福大人自己的项目管理应用！",path:"/pages/mine/mine"}))),C((()=>{(async()=>{if(!E.hasLogin)return;let a=await A.collection("travel-articles").where("user_id == $cloudEnv_uid && delete_status == 1 && article_status == 1").count();const{total:e}=a.result;D.artNum=e;let t=await A.collection("travel-articles").where("user_id == $cloudEnv_uid").groupBy("user_id").groupField("sum(like_count) as likeTotal").get();if(t.result.data.length){const{likeTotal:a}=t.result.data[0];D.receivedLikes=a}})()})),I((()=>{N.set("currentRoute","mine")})),(a,e)=>{const t=h,s=v,_=z(l("wd-icon"),w),j=g,C=b,I=k,N=x;return i(),c(s,{class:"user"},{default:r((()=>[u(s,{class:"user-wrap"},{default:r((()=>[u(s,{class:"info",onClick:O},{default:r((()=>[B.value&&T.value.avatar_file&&T.value.avatar_file.url?(i(),c(t,{key:0,class:"avatar",mode:"aspectFill",src:T.value.avatar_file.url},null,8,["src"])):(i(),c(t,{key:1,class:"avatar",mode:"aspectFill",src:L})),u(s,{class:"info-basic"},{default:r((()=>[B.value?(i(),c(s,{key:0},{default:r((()=>[u(s,{class:"nickname"},{default:r((()=>[n(o(q.value),1)])),_:1}),u(s,{class:"reg-time"},{default:r((()=>[n("注册于"+o(d(F)(T.value.register_date)),1)])),_:1})])),_:1})):(i(),c(s,{key:1},{default:r((()=>[u(s,{class:"nickname"},{default:r((()=>[n("点击登录")])),_:1}),u(s,{class:"reg-time"},{default:r((()=>[n("福大帮，这是福大人自己的项目管理应用！")])),_:1})])),_:1}))])),_:1}),u(s,{class:"chevron-icon"},{default:r((()=>[u(_,{name:"chevron-right",size:"36rpx"})])),_:1})])),_:1})])),_:1}),u(s,{class:"swiper-wrap"},{default:r((()=>[u(I,{class:"swiper",circular:"","indicator-dots":!1,autoplay:!1,interval:"8000",duration:"600"},{default:r((()=>[(i(!0),m(p,null,f(G,((a,e)=>(i(),c(C,{class:"banner-item",key:"banner"+e},{default:r((()=>[u(t,{src:a.image,mode:""},null,8,["src"]),u(j,{class:y("banner-text"+e)},{default:r((()=>[n(o(a.text),1)])),_:2},1032,["class"])])),_:2},1024)))),128))])),_:1})])),_:1}),u(s,{class:"com-item"},{default:r((()=>[u(s,{class:"com-wrap"},{default:r((()=>[u(s,{class:"cell summary"},{default:r((()=>[u(j,null,{default:r((()=>[n(o(D.receivedLikes),1)])),_:1}),n("获赞 "),u(j,null,{default:r((()=>[n(o(D.artNum),1)])),_:1}),n("发文 ")])),_:1}),(i(),m(p,null,f(H,((a,e)=>u(s,{class:"cell",key:e,onClick:e=>K(a)},{default:r((()=>[u(s,{class:"cell-left"},{default:r((()=>[u(_,{class:"cell-icon",name:a.icon,size:"36rpx"},null,8,["name"]),u(s,{class:"cell-text"},{default:r((()=>[n(o(a.title),1)])),_:2},1024)])),_:2},1024),u(s,{class:"more-icon"},{default:r((()=>[u(_,{name:"chevron-right",size:"36rpx"})])),_:1})])),_:2},1032,["onClick"]))),64))])),_:1})])),_:1}),u(s,{class:"com-item"},{default:r((()=>[u(s,{class:"com-wrap"},{default:r((()=>[(i(),m(p,null,f(J,((a,e)=>u(N,{class:"cell",key:e,"open-type":"chat"===a.path?"contact":"",onClick:e=>K(a)},{default:r((()=>[u(s,{class:"cell-left"},{default:r((()=>[u(_,{class:"cell-icon",name:a.icon,size:"36rpx"},null,8,["name"]),u(s,{class:"cell-text"},{default:r((()=>[n(o(a.title),1)])),_:2},1024)])),_:2},1024),u(s,{class:"more-icon"},{default:r((()=>[u(_,{name:"chevron-right",size:"36rpx"})])),_:1})])),_:2},1032,["open-type","onClick"]))),64))])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-944b807c"]]);export{B as default};
