import{D as t,o as e,a as o,w as s,e as l,n as i,k as a,f as n,b as r,t as c,m as d,F as u,p as h,l as b,i as f,s as g,af as m,z as p,a1 as k,a7 as x,aB as C,d as y,h as _,A as v,J as L,j as S,$ as w,Y as T,a0 as I}from"./index-CzFVNye6.js";import{_ as q}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{r as V}from"./uni-app.es.xDvG45QC.js";const z="#-*=*-*=*-*=*@-link超链接标识link-@*=*-*=*-*=*-#";const R=q({components:{ColorPicker:q({props:{color:{type:Object,default:()=>({r:0,g:0,b:0,a:0})},spareColor:{type:Array,default:()=>[]}},data:()=>({show:!1,active:!1,rgba:{r:0,g:0,b:0,a:1},hsb:{h:0,s:0,b:0},site:[{top:0,left:0},{left:0},{left:0}],index:0,bgcolor:{r:255,g:0,b:0,a:1},hex:"#000000",mode:!0,colorList:[{r:244,g:67,b:54,a:1},{r:233,g:30,b:99,a:1},{r:156,g:39,b:176,a:1},{r:103,g:58,b:183,a:1},{r:63,g:81,b:181,a:1},{r:33,g:150,b:243,a:1},{r:3,g:169,b:244,a:1},{r:0,g:188,b:212,a:1},{r:0,g:150,b:136,a:1},{r:76,g:175,b:80,a:1},{r:139,g:195,b:74,a:1},{r:205,g:220,b:57,a:1},{r:255,g:235,b:59,a:1},{r:255,g:193,b:7,a:1},{r:255,g:152,b:0,a:1},{r:255,g:87,b:34,a:1},{r:121,g:85,b:72,a:1},{r:158,g:158,b:158,a:1},{r:0,g:0,b:0,a:.5},{r:0,g:0,b:0,a:0}]}),created(){this.ready()},methods:{ready(){this.rgba=this.color,0!==this.spareColor.length&&(this.colorList=this.spareColor)},init(){this.hsb=this.rgbToHex(this.rgba),this.setValue(this.rgba)},moveHandle(){},open(){this.show=!0,this.$nextTick((()=>{this.init(),setTimeout((()=>{this.active=!0,setTimeout((()=>{this.getSelectorQuery()}),350)}),50)}))},close(){this.active=!1,this.$nextTick((()=>{setTimeout((()=>{this.show=!1}),500)}))},confirm(){this.close(),this.$emit("confirm",{rgba:this.rgba,hex:this.hex})},select(){this.mode=!this.mode},selectColor(t){this.setColorBySelect(t)},touchstart(t,e){const{pageX:o,pageY:s,clientX:l,clientY:i}=t.touches[0];this.moveX=o||l,this.moveY=s||i,this.setPosition(this.moveX,this.moveY,e)},touchmove(t,e){const{pageX:o,pageY:s,clientX:l,clientY:i}=t.touches[0];this.moveX=o||l,this.moveY=s||i,this.setPosition(this.moveX,this.moveY,e)},touchend(t,e){},setPosition(t,e,o){this.index=o;const{top:s,left:l,width:i,height:a}=this.position[o];this.site[o].left=Math.max(0,Math.min(parseInt(t-l),i)),0===o?(this.site[o].top=Math.max(0,Math.min(parseInt(e-s),a)),this.hsb.s=parseInt(100*this.site[o].left/i),this.hsb.b=parseInt(100-100*this.site[o].top/a),this.setColor(),this.setValue(this.rgba)):this.setControl(o,this.site[o].left)},setColor(){const t=this.HSBToRGB(this.hsb);this.rgba.r=t.r,this.rgba.g=t.g,this.rgba.b=t.b},setValue(t){this.hex="#"+this.rgbToHex(t)},setControl(t,e){const{top:o,left:s,width:l,height:i}=this.position[t];1===t?(this.hsb.h=parseInt(360*e/l),this.bgcolor=this.HSBToRGB({h:this.hsb.h,s:100,b:100}),this.setColor()):this.rgba.a=(e/l).toFixed(1),this.setValue(this.rgba)},rgbToHex(t){let e=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return e.map((function(t,o){1==t.length&&(e[o]="0"+t)})),e.join("")},setColorBySelect(t){const{r:e,g:o,b:s,a:l}=t;let i={};i={r:e?parseInt(e):0,g:o?parseInt(o):0,b:s?parseInt(s):0,a:l||0},this.rgba=i,this.hsb=this.rgbToHsb(i),this.changeViewByHsb()},changeViewByHsb(){const[t,e,o]=this.position;this.site[0].left=parseInt(this.hsb.s*t.width/100),this.site[0].top=parseInt((100-this.hsb.b)*t.height/100),this.setColor(this.hsb.h),this.setValue(this.rgba),this.bgcolor=this.HSBToRGB({h:this.hsb.h,s:100,b:100}),this.site[1].left=this.hsb.h/360*e.width,this.site[2].left=this.rgba.a*o.width},HSBToRGB(t){let e={},o=Math.round(t.h),s=Math.round(255*t.s/100),l=Math.round(255*t.b/100);if(0==s)e.r=e.g=e.b=l;else{let t=l,i=(255-s)*l/255,a=o%60*(t-i)/60;360==o&&(o=0),o<60?(e.r=t,e.b=i,e.g=i+a):o<120?(e.g=t,e.b=i,e.r=t-a):o<180?(e.g=t,e.r=i,e.b=i+a):o<240?(e.b=t,e.r=i,e.g=t-a):o<300?(e.b=t,e.g=i,e.r=i+a):o<360?(e.r=t,e.g=i,e.b=t-a):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},rgbToHsb(t){let e={h:0,s:0,b:0},o=Math.min(t.r,t.g,t.b),s=Math.max(t.r,t.g,t.b),l=s-o;return e.b=s,e.s=0!=s?255*l/s:0,0!=e.s?t.r==s?e.h=(t.g-t.b)/l:t.g==s?e.h=2+(t.b-t.r)/l:e.h=4+(t.r-t.g)/l:e.h=-1,e.h*=60,e.h<0&&(e.h=0),e.s*=100/255,e.b*=100/255,e},getSelectorQuery(){t().in(this).selectAll(".boxs").boundingClientRect((t=>{t&&0!==t.length?(this.position=t,this.setColorBySelect(this.rgba)):setTimeout((()=>this.getSelectorQuery()),20)})).exec()},hex2Rgb(t,e=1){const o=t.slice(1);return{r:parseInt(o.slice(0,2),16),g:parseInt(o.slice(2,4),16),b:parseInt(o.slice(4,6),16),a:e}}},watch:{spareColor(t){this.colorList=t},color(t){this.ready()}}},[["render",function(t,g,m,p,k,x){const C=f;return k.show?(e(),o(C,{key:0,class:"t-wrapper",onTouchmove:a(x.moveHandle,["stop","prevent"])},{default:s((()=>[l(C,{class:i(["t-mask",{active:k.active}]),onClick:a(x.close,["stop"])},null,8,["class","onClick"]),l(C,{class:i(["t-box",{active:k.active}])},{default:s((()=>[l(C,{class:"t-header"},{default:s((()=>[l(C,{class:"t-header-button",onClick:x.close},{default:s((()=>[n("取消")])),_:1},8,["onClick"]),l(C,{class:"t-header-button",onClick:x.confirm},{default:s((()=>[n("确认")])),_:1},8,["onClick"])])),_:1}),l(C,{class:"t-color__box",style:r({background:"rgb("+k.bgcolor.r+","+k.bgcolor.g+","+k.bgcolor.b+")"})},{default:s((()=>[l(C,{class:"t-background boxs",onTouchstart:g[0]||(g[0]=t=>x.touchstart(t,0)),onTouchmove:g[1]||(g[1]=t=>x.touchmove(t,0)),onTouchend:g[2]||(g[2]=t=>x.touchend(t,0))},{default:s((()=>[l(C,{class:"t-color-mask"}),l(C,{class:"t-pointer",style:r({top:k.site[0].top-8+"px",left:k.site[0].left-8+"px"})},null,8,["style"])])),_:1})])),_:1},8,["style"]),l(C,{class:"t-control__box"},{default:s((()=>[l(C,{class:"t-control__color"},{default:s((()=>[l(C,{class:"t-control__color-content",style:r({background:"rgba("+k.rgba.r+","+k.rgba.g+","+k.rgba.b+","+k.rgba.a+")"})},null,8,["style"])])),_:1}),l(C,{class:"t-control-box__item"},{default:s((()=>[l(C,{class:"t-controller boxs",onTouchstart:g[3]||(g[3]=t=>x.touchstart(t,1)),onTouchmove:g[4]||(g[4]=t=>x.touchmove(t,1)),onTouchend:g[5]||(g[5]=t=>x.touchend(t,1))},{default:s((()=>[l(C,{class:"t-hue"},{default:s((()=>[l(C,{class:"t-circle",style:r({left:k.site[1].left-12+"px"})},null,8,["style"])])),_:1})])),_:1}),l(C,{class:"t-controller boxs",onTouchstart:g[6]||(g[6]=t=>x.touchstart(t,2)),onTouchmove:g[7]||(g[7]=t=>x.touchmove(t,2)),onTouchend:g[8]||(g[8]=t=>x.touchend(t,2))},{default:s((()=>[l(C,{class:"t-transparency"},{default:s((()=>[l(C,{class:"t-circle",style:r({left:k.site[2].left-12+"px"})},null,8,["style"])])),_:1})])),_:1})])),_:1})])),_:1}),l(C,{class:"t-result__box"},{default:s((()=>[k.mode?(e(),o(C,{key:0,class:"t-result__item"},{default:s((()=>[l(C,{class:"t-result__box-input"},{default:s((()=>[n(c(k.hex),1)])),_:1}),l(C,{class:"t-result__box-text"},{default:s((()=>[n("HEX")])),_:1})])),_:1})):(e(),d(u,{key:1},[l(C,{class:"t-result__item"},{default:s((()=>[l(C,{class:"t-result__box-input"},{default:s((()=>[n(c(k.rgba.r),1)])),_:1}),l(C,{class:"t-result__box-text"},{default:s((()=>[n("R")])),_:1})])),_:1}),l(C,{class:"t-result__item"},{default:s((()=>[l(C,{class:"t-result__box-input"},{default:s((()=>[n(c(k.rgba.g),1)])),_:1}),l(C,{class:"t-result__box-text"},{default:s((()=>[n("G")])),_:1})])),_:1}),l(C,{class:"t-result__item"},{default:s((()=>[l(C,{class:"t-result__box-input"},{default:s((()=>[n(c(k.rgba.b),1)])),_:1}),l(C,{class:"t-result__box-text"},{default:s((()=>[n("B")])),_:1})])),_:1}),l(C,{class:"t-result__item"},{default:s((()=>[l(C,{class:"t-result__box-input"},{default:s((()=>[n(c(k.rgba.a),1)])),_:1}),l(C,{class:"t-result__box-text"},{default:s((()=>[n("A")])),_:1})])),_:1})],64)),l(C,{class:"t-result__item t-select",onClick:x.select},{default:s((()=>[l(C,{class:"t-result__box-input"},{default:s((()=>[l(C,null,{default:s((()=>[n("切换")])),_:1}),l(C,null,{default:s((()=>[n("模式")])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1}),l(C,{class:"t-alternative"},{default:s((()=>[(e(!0),d(u,null,h(k.colorList,((t,i)=>(e(),o(C,{class:"t-alternative__item",key:i},{default:s((()=>[l(C,{class:"t-alternative__item-content",style:r({background:"rgba("+t.r+","+t.g+","+t.b+","+t.a+")"}),onClick:e=>x.selectColor(t)},null,8,["style","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["class"])])),_:1},8,["onTouchmove"])):b("",!0)}],["__scopeId","data-v-2722099d"]]),LinkEdit:q({data:()=>({showPopup:!1,descVal:"",addrVal:""}),methods:{open(){this.showPopup=!0,this.$emit("open")},close(){this.showPopup=!1,this.descVal="",this.addrVal="",this.$emit("close")},onConfirm(){this.descVal?this.addrVal?(this.$emit("confirm",{text:this.descVal,href:this.addrVal}),this.close()):g({title:"请输入链接地址",icon:"none"}):g({title:"请输入链接描述",icon:"none"})}}},[["render",function(t,i,a,r,c,d){const u=f,h=m;return c.showPopup?(e(),o(u,{key:0,class:"link-edit-container"},{default:s((()=>[l(u,{class:"link-edit"},{default:s((()=>[l(u,{class:"title"},{default:s((()=>[n("添加链接")])),_:1}),l(u,{class:"edit"},{default:s((()=>[l(u,{class:"description"},{default:s((()=>[n(" 链接描述： "),l(h,{modelValue:c.descVal,"onUpdate:modelValue":i[0]||(i[0]=t=>c.descVal=t),type:"text",class:"input",placeholder:"请输入链接描述"},null,8,["modelValue"])])),_:1}),l(u,{class:"address"},{default:s((()=>[n(" 链接地址： "),l(h,{modelValue:c.addrVal,"onUpdate:modelValue":i[1]||(i[1]=t=>c.addrVal=t),type:"text",class:"input",placeholder:"请输入链接地址"},null,8,["modelValue"])])),_:1})])),_:1}),l(u,{class:"control"},{default:s((()=>[l(u,{class:"cancel",onClick:d.close},{default:s((()=>[n("取消")])),_:1},8,["onClick"]),l(u,{class:"confirm",onClick:d.onConfirm},{default:s((()=>[n("确认")])),_:1},8,["onClick"])])),_:1})])),_:1}),l(u,{class:"mask"})])),_:1})):b("",!0)}],["__scopeId","data-v-54be7275"]])},props:{placeholder:{type:String,default:"请写上你的招募需求吧 ~"},readOnly:{type:Boolean,default:!1},maxlength:{type:Number,default:-1},toolbarConfig:{type:Object,default:()=>({keys:[],excludeKeys:[],iconSize:"18px",iconColumns:10})}},watch:{toolbarConfig:{deep:!0,immediate:!0,handler(t){var e,o;(null==(e=t.keys)?void 0:e.length)>0?this.toolbarList=t.keys:this.toolbarList=(null==(o=t.excludeKeys)?void 0:o.length)>0?this.toolbarAllList.filter((e=>!t.excludeKeys.includes(e))):this.toolbarAllList,this.iconSize=t.iconSize||"18px",this.iconColumns=t.iconColumns||10}}},data:()=>({formats:{},textColor:"",backgroundColor:"",curColor:"",defaultColor:{r:0,g:0,b:0,a:1},iconSize:"20px",iconColumns:10,toolbarList:[],toolbarAllList:["bold","italic","underline","strike","alignLeft","alignCenter","alignRight","alignJustify","lineHeight","letterSpacing","marginTop","marginBottom","fontFamily","fontSize","color","backgroundColor","date","listCheck","listOrdered","listBullet","indentInc","indentDec","divider","header","scriptSub","scriptSuper","direction","image","link","undo","redo","removeFormat","clear","export"]}),methods:{onEditorReady(){t().in(this).select("#editor").context((t=>{this.editorCtx=t.context,this.$emit("init",this.editorCtx)})).exec()},undo(){this.editorCtx.undo()},redo(){this.editorCtx.redo()},format(t){let{name:e,value:o}=t.target.dataset;if(e)switch(e){case"color":case"backgroundColor":this.curColor=e,this.showPicker();break;default:this.editorCtx.format(e,o)}},showPicker(){switch(this.curColor){case"color":this.defaultColor=this.textColor?this.$refs.colorPickerRef.hex2Rgb(this.textColor):{r:0,g:0,b:0,a:1};break;case"backgroundColor":this.defaultColor=this.backgroundColor?this.$refs.colorPickerRef.hex2Rgb(this.backgroundColor):{r:0,g:0,b:0,a:0}}this.$refs.colorPickerRef.open()},confirmColor(t){switch(this.curColor){case"color":this.textColor=t.hex,this.editorCtx.format("color",this.textColor);break;case"backgroundColor":this.backgroundColor=t.hex,this.editorCtx.format("backgroundColor",this.backgroundColor)}},onStatusChange(t){t.detail.color&&(this.textColor=t.detail.color),t.detail.backgroundColor&&(this.backgroundColor=t.detail.backgroundColor),this.formats=t.detail},insertDivider(){this.editorCtx.insertDivider()},clear(){p({title:"清空编辑器",content:"确定清空编辑器吗？",success:({confirm:t})=>{t&&this.editorCtx.clear()}})},removeFormat(){p({title:"文本格式化",content:"确定要清除所选择部分文本块格式吗？",showCancel:!0,success:({confirm:t})=>{t&&this.editorCtx.removeFormat()}})},insertDate(){const t=new Date,e=`${t.getFullYear()}/${t.getMonth()+1}/${t.getDate()}`;this.editorCtx.insertText({text:e})},insertLink(){this.$refs.linkEditRef.open()},confirmLink(t){var e,o;this.$refs.linkEditRef.close(),this.$emit("addLink",t),e=this.editorCtx,o=t,e.insertText({text:z}),e.getContents({success(t){let s=t.delta.ops;const l=s.findIndex((t=>{var e;return t.insert&&"object"!=typeof t.insert&&-1!==(null==(e=t.insert)?void 0:e.indexOf(z))}));if(l>-1){const t=s[l],i=t.attributes,[a,n]=t.insert.split(z),r=[];if(a){const t=i?{insert:a,attributes:i}:{insert:a};r.push(t)}const c={insert:o.text,attributes:{link:o.href,textDecoration:o.textDecoration||"none",color:o.color||"#007aff"}};if(r.push(c),n){const t=i?{insert:n,attributes:i}:{insert:n};r.push(t)}s.splice(l,1),s.splice(l,0,...r),e.setContents({delta:{ops:s}}),e.blur()}}})},insertImage(){k({success:t=>{const{tempFiles:e}=t;this.$emit("upinImage",e,this.editorCtx)},fail(){g({title:"未授权访问相册权限，请授权后使用",icon:"none"})}})},onEditorInput(t){if(Object.keys(t.detail).length<=0)return;const{html:e,text:o}=t.detail;if(-1!==o.indexOf(z))return;const s=parseInt(this.maxlength);o.replace(/[ \t\r\n]/g,"").length>s&&-1!=s?p({content:`超过${s}字数啦~`,confirmText:"确定",showCancel:!1,success:()=>{this.$emit("overMax",{html:e,text:o})}}):this.$emit("input",{html:e,text:o})},exportHtml(){this.editorCtx.getContents({success:t=>{this.$emit("exportHtml",t.html)}})},eLongpress(){}}},[["render",function(t,a,n,c,d,u){const h=f,g=x("color-picker"),m=x("link-edit"),p=C;return e(),o(h,{class:"sp-editor",style:r({"--icon-size":d.iconSize,"--icon-columns":d.iconColumns})},{default:s((()=>[n.readOnly?b("",!0):(e(),o(h,{key:0,class:"sp-editor-toolbar",onClick:u.format},{default:s((()=>[d.toolbarList.includes("header")?(e(),o(h,{key:0,class:i([1===d.formats.header?"ql-active":"","iconfont icon-format-header-1"]),title:"标题","data-name":"header","data-value":1},null,8,["class"])):b("",!0),d.toolbarList.includes("bold")?(e(),o(h,{key:1,class:i([d.formats.bold?"ql-active":"","iconfont icon-zitijiacu"]),title:"加粗","data-name":"bold"},null,8,["class"])):b("",!0),d.toolbarList.includes("italic")?(e(),o(h,{key:2,class:i([d.formats.italic?"ql-active":"","iconfont icon-zitixieti"]),title:"斜体","data-name":"italic"},null,8,["class"])):b("",!0),d.toolbarList.includes("underline")?(e(),o(h,{key:3,class:i([d.formats.underline?"ql-active":"","iconfont icon-zitixiahuaxian"]),title:"下划线","data-name":"underline"},null,8,["class"])):b("",!0),d.toolbarList.includes("strike")?(e(),o(h,{key:4,class:i([d.formats.strike?"ql-active":"","iconfont icon-zitishanchuxian"]),title:"删除线","data-name":"strike"},null,8,["class"])):b("",!0),d.toolbarList.includes("alignLeft")?(e(),o(h,{key:5,class:i(["left"===d.formats.align?"ql-active":"","iconfont icon-zuoduiqi"]),title:"左对齐","data-name":"align","data-value":"left"},null,8,["class"])):b("",!0),d.toolbarList.includes("alignCenter")?(e(),o(h,{key:6,class:i(["center"===d.formats.align?"ql-active":"","iconfont icon-juzhongduiqi"]),title:"居中对齐","data-name":"align","data-value":"center"},null,8,["class"])):b("",!0),d.toolbarList.includes("alignRight")?(e(),o(h,{key:7,class:i(["right"===d.formats.align?"ql-active":"","iconfont icon-youduiqi"]),title:"右对齐","data-name":"align","data-value":"right"},null,8,["class"])):b("",!0),d.toolbarList.includes("alignJustify")?(e(),o(h,{key:8,class:i(["justify"===d.formats.align?"ql-active":"","iconfont icon-zuoyouduiqi"]),title:"两端对齐","data-name":"align","data-value":"justify"},null,8,["class"])):b("",!0),d.toolbarList.includes("lineHeight")?(e(),o(h,{key:9,class:i([d.formats.lineHeight?"ql-active":"","iconfont icon-line-height"]),title:"行间距","data-name":"lineHeight","data-value":"2"},null,8,["class"])):b("",!0),d.toolbarList.includes("letterSpacing")?(e(),o(h,{key:10,class:i([d.formats.letterSpacing?"ql-active":"","iconfont icon-Character-Spacing"]),title:"字间距","data-name":"letterSpacing","data-value":"2em"},null,8,["class"])):b("",!0),d.toolbarList.includes("marginTop")?(e(),o(h,{key:11,class:i([d.formats.marginTop?"ql-active":"","iconfont icon-722bianjiqi_duanqianju"]),title:"段前距","data-name":"marginTop","data-value":"20px"},null,8,["class"])):b("",!0),d.toolbarList.includes("marginBottom")?(e(),o(h,{key:12,class:i([d.formats.marginBottom?"ql-active":"","iconfont icon-723bianjiqi_duanhouju"]),title:"段后距","data-name":"marginBottom","data-value":"20px"},null,8,["class"])):b("",!0),d.toolbarList.includes("fontSize")?(e(),o(h,{key:13,class:i([d.formats.fontFamily?"ql-active":"","iconfont icon-font"]),title:"字体","data-name":"fontFamily","data-value":"宋体"},null,8,["class"])):b("",!0),d.toolbarList.includes("fontSize")?(e(),o(h,{key:14,class:i(["24px"===d.formats.fontSize?"ql-active":"","iconfont icon-fontsize"]),title:"字号","data-name":"fontSize","data-value":"24px"},null,8,["class"])):b("",!0),d.toolbarList.includes("color")?(e(),o(h,{key:15,style:r({color:d.formats.color?d.textColor:"initial"}),class:"iconfont icon-text_color",title:"文字颜色","data-name":"color","data-value":d.textColor},null,8,["style","data-value"])):b("",!0),d.toolbarList.includes("backgroundColor")?(e(),o(h,{key:16,style:r({color:d.formats.backgroundColor?d.backgroundColor:"initial"}),class:"iconfont icon-fontbgcolor",title:"背景颜色","data-name":"backgroundColor","data-value":d.backgroundColor},null,8,["style","data-value"])):b("",!0),d.toolbarList.includes("date")?(e(),o(h,{key:17,class:"iconfont icon-date",title:"日期",onClick:u.insertDate},null,8,["onClick"])):b("",!0),d.toolbarList.includes("listCheck")?(e(),o(h,{key:18,class:"iconfont icon--checklist",title:"待办","data-name":"list","data-value":"check"})):b("",!0),d.toolbarList.includes("listOrdered")?(e(),o(h,{key:19,class:i(["ordered"===d.formats.list?"ql-active":"","iconfont icon-youxupailie"]),title:"有序列表","data-name":"list","data-value":"ordered"},null,8,["class"])):b("",!0),d.toolbarList.includes("listBullet")?(e(),o(h,{key:20,class:i(["bullet"===d.formats.list?"ql-active":"","iconfont icon-wuxupailie"]),title:"无序列表","data-name":"list","data-value":"bullet"},null,8,["class"])):b("",!0),d.toolbarList.includes("divider")?(e(),o(h,{key:21,class:"iconfont icon-fengexian",title:"分割线",onClick:u.insertDivider},null,8,["onClick"])):b("",!0),d.toolbarList.includes("indentDec")?(e(),o(h,{key:22,class:"iconfont icon-outdent",title:"减少缩进","data-name":"indent","data-value":"-1"})):b("",!0),d.toolbarList.includes("indentInc")?(e(),o(h,{key:23,class:"iconfont icon-indent",title:"增加缩进","data-name":"indent","data-value":"+1"})):b("",!0),d.toolbarList.includes("scriptSub")?(e(),o(h,{key:24,class:i(["sub"===d.formats.script?"ql-active":"","iconfont icon-zitixiabiao"]),title:"下标","data-name":"script","data-value":"sub"},null,8,["class"])):b("",!0),d.toolbarList.includes("scriptSuper")?(e(),o(h,{key:25,class:i(["super"===d.formats.script?"ql-active":"","iconfont icon-zitishangbiao"]),title:"上标","data-name":"script","data-value":"super"},null,8,["class"])):b("",!0),d.toolbarList.includes("direction")?(e(),o(h,{key:26,class:i(["rtl"===d.formats.direction?"ql-active":"","iconfont icon-direction-rtl"]),title:"文本方向","data-name":"direction","data-value":"rtl"},null,8,["class"])):b("",!0),d.toolbarList.includes("image")?(e(),o(h,{key:27,class:"iconfont icon-charutupian",title:"图片",onClick:u.insertImage},null,8,["onClick"])):b("",!0),d.toolbarList.includes("link")?(e(),o(h,{key:28,class:"iconfont icon-charulianjie",title:"超链接",onClick:u.insertLink},null,8,["onClick"])):b("",!0),d.toolbarList.includes("undo")?(e(),o(h,{key:29,class:"iconfont icon-undo",title:"撤销",onClick:u.undo},null,8,["onClick"])):b("",!0),d.toolbarList.includes("redo")?(e(),o(h,{key:30,class:"iconfont icon-redo",title:"重做",onClick:u.redo},null,8,["onClick"])):b("",!0),d.toolbarList.includes("removeFormat")?(e(),o(h,{key:31,class:"iconfont icon-clearedformat",title:"清除格式",onClick:u.removeFormat},null,8,["onClick"])):b("",!0),d.toolbarList.includes("clear")?(e(),o(h,{key:32,class:"iconfont icon-shanchu",title:"清空",onClick:u.clear},null,8,["onClick"])):b("",!0),d.toolbarList.includes("export")?(e(),o(h,{key:33,class:"iconfont icon-baocun",title:"导出",onClick:u.exportHtml},null,8,["onClick"])):b("",!0)])),_:1},8,["onClick"])),d.toolbarList.includes("color")||d.toolbarList.includes("backgroundColor")?(e(),o(g,{key:1,ref:"colorPickerRef",color:d.defaultColor,onConfirm:u.confirmColor},null,8,["color","onConfirm"])):b("",!0),d.toolbarList.includes("link")&&!n.readOnly?(e(),o(m,{key:2,ref:"linkEditRef",onConfirm:u.confirmLink},null,8,["onConfirm"])):b("",!0),l(h,{class:"sp-editor-wrapper",onLongpress:u.eLongpress},{default:s((()=>[l(p,{id:"editor",class:i(["ql-editor editor-container",{"ql-image-overlay-none":n.readOnly}]),"show-img-size":"","show-img-toolbar":"","show-img-resize":"",placeholder:n.placeholder,"read-only":n.readOnly,onStatuschange:u.onStatusChange,onReady:u.onEditorReady,onInput:u.onEditorInput},null,8,["class","placeholder","read-only","onStatuschange","onReady","onInput"])])),_:1},8,["onLongpress"])])),_:1},8,["style"])}],["__scopeId","data-v-3dbd3307"]]),B=y({__name:"custom-editor",props:{editorContent:{type:String,default:""}},emits:["setEditerValue","init"],setup(t,{expose:i,emit:a}){const n=a,r=t,c=_("");v((()=>r.editorContent),(t=>{c.value=t,u.value&&k()}),{deep:!0});const d=L({content:"",text:""}),u=_(),h=t=>{u.value=t,k()},b=t=>{d.content=t.html,d.text=t.text,n("setEditerValue",{html:t.html,text:t.text})},m=(t,e)=>{t.forEach((async t=>{w({title:"上传中请稍后",mask:!0});try{let{fileID:o}=await T.uploadFile({filePath:t.path,cloudPath:`cloudstorage/${t.name}`,cloudPathAsRealPath:!0,fileType:"image"});const s=await T.getTempFileURL({fileList:[o]});e.insertImage({src:s.fileList[0].tempFileURL,width:"100%",success:function(){I()}})}catch(o){g({title:"图片上传失败，请联系管理员！",icon:"none"}),I(),console.log("图片上传失败---",o)}}))},p=t=>{console.log("==== overMax :",t),g({title:"输入内容超过最大字数限制！",icon:"none"})},k=()=>{u.value.setContents({html:c.value})};return i({state:d,setContent:k}),(t,i)=>{const a=V(S("sp-editor"),R),n=f;return e(),o(n,{style:{height:"100%"}},{default:s((()=>[l(a,{"toolbar-config":{excludeKeys:["direction","date","lineHeight","letterSpacing","listCheck"],iconSize:"18px"},onInit:h,onInput:b,onUpinImage:m,onOverMax:p})])),_:1})}}});export{B as _};
