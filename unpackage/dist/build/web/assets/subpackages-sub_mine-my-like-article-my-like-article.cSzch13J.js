import{d as e,Y as a,h as t,J as l,o as s,a as i,w as o,e as u,m as d,p as r,F as c,f as n,t as _,M as p,i as f,u as m,N as v}from"./index-CzFVNye6.js";import{b as g,c as h,a as b}from"./uni-app.es.xDvG45QC.js";import{t as k}from"./index.CTSRJkC8.js";import{_ as j}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./config.defalut.DCXQerkV.js";const x=j(e({__name:"my-like-article",setup(e){const j=a.database(),x=t([]),w=t(""),y=l({page:1,pageSize:20,total:0}),C=()=>{const{pageSize:e,page:a}=y;w.value="加载中...";const t=j.collection("travel-like").where("user_id == $cloudEnv_uid").field("article_id").getTemp(),l=j.collection("travel-articles").where("article_status == 1 && delete_status == 1 && is_open == true").field("title, publish_date, user_id, _id").orderBy("publish_date","asc").getTemp();j.collection(t,l).where("article_id != []").skip((a-1)*e).limit(e).get({getCount:!0}).then((e=>{var t,l;y.total=(null==(t=e.result)?void 0:t.count)||0,x.value=1===a?(null==(l=e.result)?void 0:l.data)||[]:x.value.concat(e.result.data)})).finally((()=>{e*a<y.total?w.value="上拉加载更多":w.value="暂无更多数据",p()}))};return g((()=>{y.page=1,C()})),h((()=>{const{total:e,page:a,pageSize:t}=y;e>a*t&&(y.page++,C())})),b((e=>{null==e||e.title,C()})),(e,a)=>{const t=f;return s(),i(t,{class:"content"},{default:o((()=>[u(t,{class:"list"},{default:o((()=>[(s(!0),d(c,null,r(x.value,(e=>(s(),i(t,{class:"li",key:e._id,onClick:a=>{return t=e.article_id[0]._id,void v({url:"/subpackages/sub_home/article-details/article-details?id="+t});var t}},{default:o((()=>[u(t,{class:"li-title"},{default:o((()=>[n(_(e.article_id[0].title),1)])),_:2},1024),u(t,{class:"li-foot"},{default:o((()=>[u(t,{class:"li-time"},{default:o((()=>[n(_(m(k)(e.article_id[0].publish_date)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),u(t,{class:"load-text"},{default:o((()=>[n(_(w.value),1)])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-67d41333"]]);export{x as default};
