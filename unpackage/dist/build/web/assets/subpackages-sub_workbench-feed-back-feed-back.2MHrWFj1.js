import{d as e,Y as a,J as t,h as l,ad as s,j as o,o as d,a as u,w as r,e as i,f as n,m as c,p,F as _,s as m,X as f,Q as v,i as b,t as j}from"./index-BKu2siHj.js";import{_ as h}from"./wd-icon.DxmEC5Gr.js";import{a as k,r as y}from"./uni-app.es.D1_Kkzeg.js";import{_ as x,a as w}from"./wd-radio-group.BcD-HNTQ.js";import{_ as g}from"./custom-editor.vue_vue_type_script_setup_true_name_custom-editor_lang.CWEDg5qH.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./props.BEkDoAAj.js";import"./useChildren.C02vI84p.js";const V=C(e({__name:"feed-back",setup(e){const C=a.database(),V=t({feedback_content:"",excerpt:"",type:1}),B=l(),I=l(!1),Q=l([{label:"产品使用问题",value:1},{label:"系统BUG",value:2},{label:"投诉",value:3},{label:"其他",value:5}]),U=e=>{V.feedback_content=e.html,V.excerpt=e.text.slice(0,160)};return k((e=>{"需求采集"===(null==e?void 0:e.title)&&(Q.value=[{label:"提交需求",value:4}],V.type=4),s({title:(null==e?void 0:e.title)||""})})),(e,a)=>{const t=y(o("wd-icon"),h),l=v,s=b,k=y(o("wd-radio"),x),z=y(o("wd-radio-group"),w),A=y(o("custom-editor"),g);return d(),u(s,{class:"content"},{default:r((()=>[i(s,{class:"header"},{default:r((()=>[i(l,{class:"submit-btn",disabled:I.value||!V.feedback_content,onClick:a[0]||(a[0]=e=>(I.value=!0,void C.collection("travel-feed-back").add({...V}).then((()=>{m({title:"保存成功",icon:"none"}),setTimeout((()=>{I.value=!1,f()}),1500)})).catch((e=>{console.log("保存失败error----",e),m({title:"保存失败，请联系管理员",icon:"none"}),I.value=!1}))))},{default:r((()=>[i(t,{name:"file-paste",size:"28rpx"}),n(" 确认 ")])),_:1},8,["disabled"])])),_:1}),i(s,{class:"feed-type"},{default:r((()=>[i(z,{modelValue:V.type,"onUpdate:modelValue":a[1]||(a[1]=e=>V.type=e),shape:"button"},{default:r((()=>[(d(!0),c(_,null,p(Q.value,((e,a)=>(d(),u(k,{key:"feed"+a,value:e.value},{default:r((()=>[n(j(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1}),i(s,{class:"footer-editor"},{default:r((()=>[i(A,{ref_key:"editComp",ref:B,onSetEditerValue:U},null,512)])),_:1})])),_:1})}}}),[["__scopeId","data-v-4640cfe3"]]);export{V as default};
